<span *ngIf="nonWorkHours?.length > 0">
  <table class="govuk-table" data-module="moj-sortable-table" aria-describedby="vho work non availability table">
    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th scope="col" class="govuk-table__header" aria-sort="none">Start Date</th>
        <th scope="col" class="govuk-table__header" aria-sort="none">End Date</th>
        <th scope="col" class="govuk-table__header" aria-sort="none">Start Time</th>
        <th scope="col" class="govuk-table__header" aria-sort="none">End Time</th>
      </tr>
    </thead>
    <tbody class="govuk-table__body">
      <tr class="govuk-table__row" *ngFor="let day of nonWorkHours">
        <td class="govuk-table__cell" [ngClass]="{ 'govuk-form-group--error': !nonWorkHourIsValid(day) }">
          <input
            id="start-date_{{ day.id }}"
            [disabled]="!isEditing"
            type="date"
            [(ngModel)]="day.start_date"
            max="{{ day.end_date }}"
            required="true"
            (blur)="onStartDateBlur(day)"
          />
        </td>
        <td class="govuk-table__cell">
          <input
            id="end-date_{{ day.id }}"
            [disabled]="!isEditing"
            type="date"
            [(ngModel)]="day.end_date"
            min="{{ day.start_date }}"
            required="true"
            (blur)="onEndDateBlur(day)"
          />
        </td>
        <td class="govuk-table__cell">
          <input
            id="start-time_{{ day.id }}"
            [disabled]="!isEditing"
            type="time"
            [(ngModel)]="day.start_time"
            [max]="day.end_time"
            (blur)="onStartTimeBlur(day)"
          />
        </td>
        <td class="govuk-table__cell">
          <input
            id="end-time_{{ day.id }}"
            [disabled]="!isEditing"
            type="time"
            [(ngModel)]="day.end_time"
            [min]="day.start_time"
            (blur)="onEndTimeBlur(day)"
          />
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="distinctValidationErrors.length > 0">
    <p class="govuk-error-message">Error:</p>
    <div *ngFor="let error of distinctValidationErrors">
      <p class="govuk-error-message">{{ error }}</p>
    </div>
  </div>
  <button
    *ngIf="!isEditing; else editingButtonsBlock"
    id="edit-individual-non-work-hours-button"
    class="govuk-button"
    data-module="govuk-button"
    (click)="switchToEditMode()"
  >
    Edit
  </button>
  <ng-template #editingButtonsBlock>
    <div class="govuk-button-group">
      <button
        id="save-individual-non-work-hours-button"
        class="govuk-button govuk-!-margin-right-6"
        data-module="govuk-button"
        (click)="saveNonWorkingHours()"
        [disabled]="isSaving || validationFailures.length > 0"
      >
        Save
      </button>
      <button
        id="cancel-editing-individual-non-work-hours-button"
        class="govuk-button govuk-button--secondary"
        data-module="govuk-button"
        (click)="cancelEditingNonWorkingHours()"
        [disabled]="isSaving"
      >
        Cancel
      </button>
    </div>
  </ng-template>
</span>
